<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../styles.css">
    <title>Pomodoro Pal Registration</title>
</head>
<body>

    <div class="register-page">

        <div class="navigation-bar">
            <button id="js-logo" class="logo">Pomodoro Pal</button>
            <button id="js-timers" class="timers">Manage Timers</button>
            <button id="js-flash-cards" class="flash-cards">Manage Flash Cards</button>
            <button id="js-notes" class="notes">Manage Notes</button>
            <button id="js-login" class="login">Login</button>
            <button id="js-register" class="register">Register</button>
        </div>  

        <div class="register-portion">

            <h1 class="register-header">
                Account Registration
            </h1>

            <form id="register-container" action="login.html">
                <table>

                    <tr class="first-name" id="first-name">
                        <td> First Name: </td>
                        <td> <input type="text" first-name=""> </td>
                    </tr>

                    <tr class="last-name" id="last-name">
                        <td> Last Name: </td>
                        <td> <input type="text" last-name=""> </td>
                    </tr>

                    <tr class="user-name" id="username">
                        <td> Username: </td>
                        <td> <input type="text" user-name=""> </td>
                    </tr>

                    <tr class="email" id="email"> 
                        <td> Email Address: </td> 
                        <td> <input type="text" email=""> </td> 
                    </tr>

                    <tr class="password" id="password">
                        <td> Password: </td> 
                        <td> <input type="Password" name=""> </td> 
                    </tr>
                    <tr class="password-confirm" id="password-confirm">
                        <td> Re-enter Password: </td>
                        <td> <input type="Password" name=""> </td>
                    </tr>
                    
               </table>

               <input type="submit" id="register-btn" name="register_submit" value="Register">

            </form>

        </div>
    </div>


    <script>

        function register() {
            document.getElementById("register-container");
        }

        /****** Navigation Bar ******/

        const logo = document.getElementById('js-logo');
        logo.addEventListener('click', () => {
        location.href = '../index.html';
        });

        const timers = document.getElementById('js-timers');
        timers.addEventListener('click', () => {
        location.href = 'timers.html';
        });

        const flashcards = document.getElementById('js-flash-cards');
        flashcards.addEventListener('click', () => {
        location.href = 'flash-cards.html';
        });

        const notes = document.getElementById('js-notes');
        notes.addEventListener('click', () => {
        location.href = 'notes.html';
        });

        const login = document.getElementById('js-login');
        login.addEventListener('click', () => {
            location.href = 'login.html';
        });

        const register = document.getElementById('js-register');
        register.addEventListener('click', () => {
            location.href = 'registration.html';
        });

    </script>
</body>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-app.js";
    import { getDatabase, set, ref } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-auth.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyCaiMsVJc3rBxL-9gjuupzs3LaVZffePkE",
      authDomain: "pomodoropal-5914e.firebaseapp.com",
      databaseURL: "https://pomodoropal-5914e-default-rtdb.firebaseio.com",
      projectId: "pomodoropal-5914e",
      storageBucket: "pomodoropal-5914e.appspot.com",
      messagingSenderId: "1033037336988",
      appId: "1:1033037336988:web:dd35ba85a815639a2c3859",
      measurementId: "G-JK1T70LH1H"
    };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);
    const aut = getAuth();
    const analytics = getAnalytics(app);

    register-btn.addEventListner('click',(e) => {

        var firstname = document.getElementById('first-name').value;
        var lastname = document.getElementById('last-name').value;
        var username = document.getElementById('username').value;
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;

    createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
        // Signed in 
        const user = userCredential.user;
        alert('user created');

        set(ref(database, 'users/' *user.uid),{
            username: username,
            email: email,
            firstname: firstname,
            lastname: lastname,
    })
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    // ..
    alert(errorMessage);
    });

});  
  </script>
</html>